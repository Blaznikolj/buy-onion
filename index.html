<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Buy .Onion — V2 (dual-check + multi-hop)</title>
  <style>
    html, body { margin:0; padding:0; font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; background:#0b0f17; color:#e6e8ec;}
    .wrap { max-width: 620px; margin: 40px auto; padding: 24px; background:#111827; border:1px solid #1f2937; border-radius: 16px; }
    .card { background:#0f1624; border:1px solid #1f2937; border-radius:12px; padding:16px; margin:16px 0;}
    label { display:block; font-size:14px; color:#9aa4b2; margin-bottom:8px; }
    input, select { width:100%; padding:12px 14px; border-radius:10px; border:1px solid #263248; background:#0b1220; color:#e6e8ec; font-size:16px; }
    .row { display:flex; gap:12px; align-items:center; }
    .row > * { flex:1; }
    button { cursor:pointer; padding:12px 16px; border:0; border-radius:10px; font-weight:600; }
    button.primary { background:#27c193; color:#08131a; }
    button.secondary { background:#1f2937; color:#e6e8ec; }
    .muted { color:#9aa4b2; font-size:13px; }
    .err { color:#ff6b6b; margin-top:8px; font-size:13px; white-space: pre-line;}
    .ok { color:#27c193; margin-top:8px; font-size:13px; white-space: pre-line;}
    .lang-switch button { font-size:14px; padding:6px 10px;}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="row" style="justify-content: space-between; align-items:center;">
      <h1 id="txt_title">Buy .Onion</h1>
      <div class="lang-switch">
        <button id="langSI" class="secondary">🇸🇮 SI</button>
        <button id="langEN" class="primary">🇬🇧 EN</button>
      </div>
    </div>
    <p class="muted" id="txt_sub">PCS V2 Router • BNB or USDT (multi-hop USDT→WBNB→.Onion) • addresses in lowercase.</p>

    <div class="card">
      <div><span id="lbl_network">Network:</span> <b id="net">—</b> • <span id="lbl_wallet">Wallet:</span> <b id="acct">—</b></div>
      <div class="row" style="margin-top:12px;">
        <button id="connect" class="primary">Connect wallet</button>
        <button id="addTok" class="secondary">Add .Onion to wallet</button>
      </div>
      <div id="status" class="ok" style="display:none;"></div>
      <div id="error" class="err" style="display:none;"></div>
    </div>

    <div class="card">
      <div class="row">
        <div>
          <label id="lbl_payWith">Pay with</label>
          <select id="pay">
            <option>BNB</option>
            <option>USDT</option>
          </select>
        </div>
        <div>
          <label id="lbl_slippage">Slippage (%)</label>
          <input id="slip" type="number" min="0.1" step="0.1" value="1.0" />
        </div>
      </div>
      <div class="row" style="margin-top:12px;">
        <div>
          <label id="lbl_amount">Amount</label>
          <input id="amt" type="number" step="0.0001" placeholder="e.g. 0.02 (BNB) or 10 (USDT)"/>
        </div>
        <div>
          <label>&nbsp;</label>
          <div class="row">
            <button id="quote" class="secondary">Quote</button>
            <button id="buy" class="primary">Buy</button>
          </div>
        </div>
      </div>
      <div id="q" class="muted" style="margin-top:10px;">—</div>
    </div>
  </div>

  <script src="./ethers.umd.min.js"></script>
  <script>
  // --- i18n ---
  const i18n = {
    si: {
      title: "Kupi .Onion",
      sub: "PCS V2 Router • BNB ali USDT (multi-hop USDT→WBNB→.Onion) • naslovi v lowercase.",
      connect: "Poveži denarnico",
      addtok: "Dodaj .Onion v wallet",
      payWith: "Plačilo z",
      slippage: "Slippage (%)",
      amount: "Znesek",
      placeholderAmount: "npr. 0.02 (BNB) ali 10 (USDT)",
      quote: "Kotacija",
      buy: "Kupi",
      connected: "Denarnica povezana.",
      network: "Omrežje:",
      wallet: "Denarnica:"
    },
    en: {
      title: "Buy .Onion",
      sub: "PCS V2 Router • BNB or USDT (multi-hop USDT→WBNB→.Onion) • addresses in lowercase.",
      connect: "Connect wallet",
      addtok: "Add .Onion to wallet",
      payWith: "Pay with",
      slippage: "Slippage (%)",
      amount: "Amount",
      placeholderAmount: "e.g. 0.02 (BNB) or 10 (USDT)",
      quote: "Quote",
      buy: "Buy",
      connected: "Wallet connected.",
      network: "Network:",
      wallet: "Wallet:"
    }
  };

  let LANG = localStorage.getItem("lang") || "en";

  function setLang(lang){
    LANG = (lang === "en") ? "en" : "si";
    localStorage.setItem("lang", LANG);
    applyLang();
  }

  function applyLang(){
    const L = i18n[LANG];
    document.getElementById("txt_title").textContent = L.title;
    document.getElementById("txt_sub").innerHTML = L.sub;
    document.getElementById("connect").textContent = L.connect;
    document.getElementById("addTok").textContent = L.addtok;
    document.getElementById("lbl_payWith").textContent = L.payWith;
    document.getElementById("lbl_slippage").textContent = L.slippage;
    document.getElementById("lbl_amount").textContent = L.amount;
    document.getElementById("amt").placeholder = L.placeholderAmount;
    document.getElementById("quote").textContent = L.quote;
    document.getElementById("buy").textContent = L.buy;
    document.getElementById("lbl_network").textContent = L.network;
    document.getElementById("lbl_wallet").textContent = L.wallet;

    document.getElementById("langSI").className = LANG==="si" ? "primary" : "secondary";
    document.getElementById("langEN").className = LANG==="en" ? "primary" : "secondary";
  }

  window.addEventListener("DOMContentLoaded", () => {
    document.getElementById("langSI").addEventListener("click", ()=>setLang("si"));
    document.getElementById("langEN").addEventListener("click", ()=>setLang("en"));
    applyLang();
  });
  </script>
</body>
</html>
